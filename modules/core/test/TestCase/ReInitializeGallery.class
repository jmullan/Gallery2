<?php

/**
 * @version $Revision$ $Date$
 * @package GalleryCore
 * @subpackage TestCase
 * @author Bharat Mediratta <bharat@menalto.com>
 */

/**
 * @package GalleryCore
 * @subpackage TestCase
 */
class ReInitializeGalleryTestCase extends TestCase {

    function getDescription() {
	return 'Reset the database and the gallery data area.  ' .
		'Create root album, anonymous user.';
    }

    function getDependencies() {
	global $gallery;
	
	$dependencies = array(array('moduleId' => 'core', 'testName' => 'EmptyGallery'),
			      array('moduleId' => 'core', 'testName' => 'CleanStore'),
			      array('moduleId' => 'core', 'testName' => 'InitializeGallery'),
			      array('moduleId' => 'imagemagick', 'testName' => 'ConfigureImageMagick'),
			      array('moduleId' => 'imagemagick', 'testName' => 'ActivateModule'),
			      array('moduleId' => 'netpbm', 'testName' => 'ConfigureNetPbm'),
			      array('moduleId' => 'netpbm', 'testName' => 'ActivateModule'),
			      array('moduleId' => 'debug', 'testName' => 'ActivateModule'),
			      array('moduleId' => 'search', 'testName' => 'ActivateModule'),
			      array('moduleId' => 'comment', 'testName' => 'ConfigureComment'),
			      array('moduleId' => 'comment', 'testName' => 'ActivateModule'),
			      array('moduleId' => 'migrate', 'testName' => 'ActivateModule'),
			      array('moduleId' => 'exif', 'testName' => 'ActivateModule'),
			      );

	/* No Ffmpeg on Windows, yet */
	$platform = $gallery->getPlatform();
	if (get_class($platform) == 'unixplatform') {
	    $dependencies[] = array('moduleId' => 'ffmpeg', 'testName' => 'ConfigureFfmpeg');
	    $dependencies[] = array('moduleId' => 'ffmpeg', 'testName' => 'ActivateModule');
	}

	return $dependencies;
    }

    function testStart() {
	return GalleryStatus::success();
    }
}

?>
