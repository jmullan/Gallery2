<?php

class CreateAllUsersGroupTestCase extends TestCase {

    function getDescription() {
	return "Create the all users group";
    }

    function testStart() {
	global $gallery;

	list ($ret, $group) = $gallery->newEntity('GalleryGroup');
	if ($ret->isError()) {
	    return $ret->wrap(__FILE__, __LINE__);
	}
	
	$ret = $group->create('All Users', GROUP_ALL_USERS);
	if ($ret->isError()) {
	    return $ret->wrap(__FILE__, __LINE__);
	}
	
	$ret = $group->save();
	if ($ret->isError()) {
	    return $ret->wrap(__FILE__, __LINE__);
	}

	$ret = $gallery->setModuleParameter('core', 'id.allUserGroup',
					    $group->getId());
	if ($ret->isError()) {
	    return $ret->wrap(__FILE__, __LINE__);
	}

	return GalleryStatus::success();
    }
}

?>
