<?php

class InstallModuleTestCase extends TestCase {

    function InstallModuleTestCase($moduleId) {
	$this->_moduleId = $moduleId;
    }

    function getDescription() {
	global $gallery;
	return "Install the $this->_moduleId module";
    }

    function testStart() {
	global $gallery;

	list ($ret, $module) = GalleryCoreApi::loadPlugin('module', $this->_moduleId);
	if ($ret->isError()) {
	    return $ret->wrap(__FILE__, __LINE__);
	}

	$ret = $module->installOrUpgrade();
	if ($ret->isError()) {
	    return $ret->wrap(__FILE__, __LINE__);
	}

	return GalleryStatus::success();
    }
}

?>
